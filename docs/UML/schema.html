<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Database Schema Diagram</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; }
      .container { max-width: 1200px; margin: 0 auto; }
      .note { color: #555; margin-top: 8px; }
    </style>
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true, securityLevel: 'loose' });
    </script>
  </head>
  <body>
    <div class="container">
      <h1>Database Schema (ER Diagram)</h1>
      <div class="mermaid">
erDiagram
  USER ||--o{ SALE : makes
  SALE ||--|{ SALE_ITEM : contains
  PRODUCT ||--o{ SALE_ITEM : included_in
  SALE ||--o{ PAYMENT : recorded_by

  USER {
    int id PK
    string name
    string username
    string password
  }
  PRODUCT {
    int id PK
    string name
    int price_cents
    int stock
    boolean active
  }
  SALE {
    int id PK
    int user_id FK
    date sale_time
    int total_cents
    string status
  }
  SALE_ITEM {
    int sale_id FK
    int product_id FK
    int quantity
    int price_cents
  }
  PAYMENT {
    int sale_id FK
    string method
    int amount_cents
    string status
    string ref
  }
      </div>
      <p class="note">Note: In SQLite, <code>product.name</code> is UNIQUE.</p>
    </div>
  </body>
</html>
